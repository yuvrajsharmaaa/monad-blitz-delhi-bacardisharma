"use strict";exports.id=618,exports.ids=[618],exports.modules={2618:(e,a,l)=>{l.r(a),l.d(a,{default:()=>i});var t=l(326),r=l(7577),s=l(6806);function i({onUpload:e,remixOf:a=null}){let{signer:l,isConnected:i,account:o}=(0,s.O)(),[n,d]=(0,r.useState)(""),[u,c]=(0,r.useState)(""),[p,m]=(0,r.useState)(null),[x,g]=(0,r.useState)(!1),[f,y]=(0,r.useState)(""),b=async l=>{if(l.preventDefault(),!p){alert("Please select an audio file");return}g(!0),y("Uploading to backend...");try{let l=new FormData;l.append("file",p),l.append("title",n||"Untitled"),l.append("description",u||""),l.append("artist",o||"Unknown"),a&&l.append("parentId",a);let t=await fetch("http://localhost:3002/api/tracks",{method:"POST",body:l});if(!t.ok){let e=await t.json();throw Error(e.error||"Upload failed")}await t.json(),y("âœ… Track uploaded successfully!"),d(""),c(""),m(null),e&&e(),setTimeout(()=>{window.location.reload()},1500)}catch(e){console.error("Upload error:",e),y(`Error: ${e?.message||String(e)}`)}finally{g(!1)}};return t.jsx("div",{className:"max-w-2xl mx-auto",children:(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[t.jsx("h2",{className:"text-2xl font-bold mb-6",children:a?"Upload Remix":"Upload Original Track"}),!1,(0,t.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),t.jsx("input",{type:"text",value:n,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),t.jsx("textarea",{value:u,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",rows:4})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Audio File (MP3/WAV/MP4)"}),t.jsx("input",{type:"file",accept:"audio/mpeg,audio/wav,audio/mp3,audio/mp4",onChange:e=>{let a=e.target.files[0];a&&("audio/mpeg"===a.type||"audio/wav"===a.type||"audio/mp3"===a.type||"audio/mp4"===a.type)?m(a):alert("Please select a valid audio file (MP3/WAV/MP4)")},className:"w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),t.jsx("button",{type:"submit",disabled:x,className:"w-full px-4 py-2 bg-primary hover:bg-primary/90 rounded-lg transition disabled:opacity-50",children:x?"Uploading...":"Upload Track"}),f&&t.jsx("p",{className:`text-sm ${f.includes("Error")?"text-red-400":"text-green-400"}`,children:f})]})]})})}}};