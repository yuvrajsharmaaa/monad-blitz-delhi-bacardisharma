"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[740],{2740:function(e,a,l){l.r(a),l.d(a,{default:function(){return i}});var t=l(7437),n=l(2265),r=l(7870);function i(e){let{onUpload:a,remixOf:l=null}=e,{signer:i,isConnected:s,account:o}=(0,r.O)(),[d,u]=(0,n.useState)(""),[c,p]=(0,n.useState)(""),[m,f]=(0,n.useState)(null),[g,x]=(0,n.useState)(!1),[y,b]=(0,n.useState)(""),h=async e=>{if(e.preventDefault(),!m){alert("Please select an audio file");return}x(!0),b("Uploading to backend...");try{let e=new FormData;e.append("file",m),e.append("title",d||"Untitled"),e.append("description",c||""),e.append("artist",o||"Unknown"),l&&e.append("parentId",l);let t=await fetch("".concat("http://localhost:3002","/api/tracks"),{method:"POST",body:e});if(!t.ok){let e=await t.json();throw Error(e.error||"Upload failed")}await t.json(),b("âœ… Track uploaded successfully!"),u(""),p(""),f(null),a&&a(),setTimeout(()=>{window.location.reload()},1500)}catch(e){console.error("Upload error:",e),b("Error: ".concat((null==e?void 0:e.message)||String(e)))}finally{x(!1)}};return(0,t.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6",children:l?"Upload Remix":"Upload Original Track"}),!1,(0,t.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Title"}),(0,t.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Description"}),(0,t.jsx)("textarea",{value:c,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",rows:4})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Audio File (MP3/WAV/MP4)"}),(0,t.jsx)("input",{type:"file",accept:"audio/mpeg,audio/wav,audio/mp3,audio/mp4",onChange:e=>{let a=e.target.files[0];a&&("audio/mpeg"===a.type||"audio/wav"===a.type||"audio/mp3"===a.type||"audio/mp4"===a.type)?f(a):alert("Please select a valid audio file (MP3/WAV/MP4)")},className:"w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),(0,t.jsx)("button",{type:"submit",disabled:g,className:"w-full px-4 py-2 bg-primary hover:bg-primary/90 rounded-lg transition disabled:opacity-50",children:g?"Uploading...":"Upload Track"}),y&&(0,t.jsx)("p",{className:"text-sm ".concat(y.includes("Error")?"text-red-400":"text-green-400"),children:y})]})]})})}}}]);